specVersion: 0.0.4
schema:
  file: ./schema.graphql
features:
  - fullTextSearch
  - ipfsOnEthereumContracts
dataSources:
  - kind: ethereum
    name: FollowContract
    network: fuji
    source:
      address: "0x95105f4D5B75c3a35015eFC15AbE3B0Cedadc196"
      abi: FollowContract
      startBlock: 15117670
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - User
        - Connection
      abis:
        - name: FollowContract
          file: ./abis/FollowContract.json
      eventHandlers:
        - event: Follow(indexed address,address,uint256)
          handler: handleFollow
        - event: UnFollow(indexed address,address,uint256)
          handler: handleUnFollow
      file: ./src/followContract.ts
  - kind: ethereum
    name: ChannelContract
    network: fuji
    source:
      address: "0x6898214015dE7B7e6469CdD907224E81e560E5E9"
      abi: ChannelContract
      startBlock: 15955649
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - Channel
        - UserChannel
        - ChatMessage
      abis:
        - name: ChannelContract
          file: ./abis/ChannelContract.json
      eventHandlers:
        - event: CreateChannel(indexed uint256,string,string,bool,address,uint256,uint256,bool,address[],address[],address)
          handler: handleCreateChannel
        - event: JoinChannel(uint256,address)
          handler: handleJoinChannel
        - event: LeaveChannel(uint256,address)
          handler: handleLeaveChannel
        - event: AddAdmin(uint256,address)
          handler: handleAddAdmin
        - event: RemoveAdmin(uint256,address)
          handler: handleRemoveAdmin
        - event: BanUser(uint256,address)
          handler: handleBanUser
        - event: UnBanUser(uint256,address)
          handler: handleUnBanUser
        - event: Chat(indexed address,uint256,string,uint256)
          handler: handleChat
      file: ./src/channelContract.ts
  - kind: ethereum
    name: BroadcastContract
    network: fuji
    source:
      address: "0x82A2b468268583F8F7fd8b3DA3907371C5Db61F7"
      abi: BroadcastContract
      startBlock: 15955649
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - User
        - BroadcastMessage
        - BroadcastReply
      abis:
        - name: BroadcastContract
          file: ./abis/BroadcastContract.json
      eventHandlers:
        - event: Broadcast(indexed address,string)
          handler: handleBroadcast
        - event: ReplyBroadcast(indexed address,string,string)
          handler: handleReplyBroadcast
      file: ./src/broadcastContract.ts
